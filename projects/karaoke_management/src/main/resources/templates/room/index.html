<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:insert="layouts/layout.html::header"></head>
<title>Rooms</title>
</head>

<body>
	<div th:insert="layouts/layout.html::nav"></div>
	<div class="container mt-3">
		<div class="row">
			<h3 class="col-lg-10">
				Rooms Information <span th:utext="${roomDTO.rooms.size()}"
					class="badge badge-secondary"></span>
			</h3>
			<button class="btn btn-success ml-auto mb-2 mr-3 text-light"
				onclick="openModal('room', undefined, 'Create')">
				<i class="fa fa-plus"></i>
			</button>
		</div>
		<table class="table table-hover table-stripped" id="table">
			<thead>
				<tr>
					<th>#</th>
					<th>Name</th>
					<th>Floor</th>
					<th>Type</th>
					<th>Capacity</th>
					<th>Total Times Book</th>
					<th>Updated At</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
					<tr th:each="room, state : ${roomDTO.rooms}">
						<td th:utext="${state.count}"></td>
						<td th:utext="${room.name}"></td>
						<td th:utext="${room.floor}"></td>
						<td>
							<span class="badge badge-primary"  th:utext="${room.type}"></span>
						</td>
						<td th:utext="${room.capacity}"></td>
						<td></td>
						<td th:utext="${room.updatedAt}"></td>
						<td>
							<button class="btn btn-sm btn-secondary" data-toggle="tooltip"
								title="Edit">
								<i class="fa fa-edit"></i>
							</button>
							<button class="btn btn-sm btn-danger" data-toggle="tooltip"
								title="Delete">
								<i class="fa fa-trash"></i>
							</button>
							<button class="btn btn-sm btn-warning" data-toggle="tooltip"
								title="Unactive">
								<i class="fa fa-lock"></i>
							</button>
						</td>
					</tr>
			</tbody>
		</table>
	</div>
	<div th:replace="layouts/layout.html::room"></div>
	<script>
		$(document).ready(function() {
			
			// config DataTable
			$("#table").DataTable({
				"pageLength" : 6
			});
			
			// config tooltip
			$('[data-toggle="tooltip"]').tooltip();
		})
	
		function addRoom(event) {
			
		}
	
		function sendAjaxAddRequest(room) {
			
			let bodyData = {
					"room": room
			};
			
			fetch(`${window.location.origin}/rooms/add`, {
				method: "POST",
				body: JSON.stringify(bodyData),
			})
			.then(res => res.text())
			.then(res => window.location.reload());
		}
	</script>
<body th:insert="layouts/layout.html::footer"></body>
</body>
</html>